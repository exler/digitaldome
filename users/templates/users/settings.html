{% extends "base.html" %}
{% load dome_tags %}
{% block title %}
    Settings
{% endblock title %}
{% block content %}
    <div class="container px-4 mx-auto">
        <div class="max-w-lg mx-auto">
            <div class="border-3 border-black bg-white p-6" style="box-shadow: 4px 4px 0px 0px #000;">
                <h2 class="text-lg font-bold uppercase mb-4">Settings</h2>
                <form method="post"
                      action="{% url 'users:settings' %}"
                      enctype="multipart/form-data"
                      class="flex flex-col gap-4">
                    {% csrf_token %}
                    {{ form.non_field_errors }}
                    <div>
                        <label class="block text-xs font-bold uppercase mb-2">{{ form.avatar.label }}</label>

                        {# Avatar preview #}
                        {% if user.avatar %}
                            <div class="mb-3 flex items-center gap-3">
                                <div class="relative">
                                    <img src="{{ user.avatar.url }}"
                                         alt="Current avatar"
                                         class="w-20 h-20 object-cover border-3 border-black rounded-full">
                                    <div class="absolute -bottom-1 -right-1 w-3 h-3 bg-neo-yellow border-2 border-black"></div>
                                </div>
                                <span class="text-xs font-bold text-gray-600">Current Avatar</span>
                            </div>
                        {% endif %}

                        <input type="file"
                               name="{{ form.avatar.name }}"
                               accept="image/*"
                               class="w-full border-2 border-black px-3 py-2 text-sm bg-white file:mr-4 file:py-1 file:px-3 file:border-0 file:text-xs file:font-bold file:bg-neo-yellow file:text-black">
                        {{ form.avatar.errors }}
                    </div>
                    <button class="btn btn-primary w-full">Update Settings</button>
                </form>
            </div>
        </div>
    </div>
{% endblock content %}
